<p-dialog
    header="Instellingen"
    [modal]="true"
    (onShow)="onShowDialog()"
    appendTo="body"
    styleClass="dialogSettings"
    [visible]="displaySettingsDialog()"
    (visibleChange)="displaySettingsDialog.set($event)"
    (onHide)="cancel()"
>
  <div class="dialog-form">
    <form [formGroup]="settingsForm" (ngSubmit)="saveSettings()">
      <div class="field">
        <label for="map" class="block">Folder waar boeken staan:</label>
        <input type="text" pInputText formControlName="map" />
        @if(settingsForm.get('map')?.invalid && settingsForm.get('map')?.dirty) {
          <small class="p-error block">Foldernaam is verplicht</small>
        }
      </div>

      <div class="field">
        <label for="copyTo" class="block">Kopieren naar:</label>
        <input type="text" pInputText formControlName="copyTo" />
        @if(settingsForm.get('copyTo')?.invalid && settingsForm.get('copyTo')?.dirty) {
          <small class="p-error block">Dit veld is verplicht</small>
        }
      </div>

      <div class="field">
        <label for="mailTo" class="block">Mailen naar:</label>
        <input type="text" pInputText formControlName="mailTo" />
        @if(settingsForm.get('mailTo')?.invalid && settingsForm.get('mailTo')?.dirty) {
          <small class="p-error block">Dit veld is verplicht</small>
        }
      </div>

      <div class="field">
        <label for="host" class="block">Host:</label>
        <input type="text" pInputText formControlName="host" />
        @if(settingsForm.get('host')?.invalid && settingsForm.get('host')?.dirty) {
          <small class="p-error block">Host is verplicht</small>
        }
      </div>

      <div class="field">
        <label for="port" class="block">Port:</label>
        <input type="text" pInputText formControlName="port" />
        @if(settingsForm.get('port')?.invalid && settingsForm.get('port')?.dirty) {
          <small class="p-error block">Port is verplicht</small>
        }
      </div>

      <div class="field">
        <label for="sendBy" class="block">Afzender:</label>
        <input type="text" pInputText formControlName="sendBy" />
        @if(settingsForm.get('sendBy')?.invalid && settingsForm.get('sendBy')?.dirty) {
          <small class="p-error block">Afzender is verplicht</small>
        }
      </div>

      <div class="field">
        <label for="password" class="block">Wachtwoord:</label><br/>
        <p-password formControlName="password" [toggleMask]="true" [feedback]="false">
        </p-password>
        @if(settingsForm.get('password')?.invalid && settingsForm.get('password')?.dirty) {
          <small class="p-error block">Wachtwoord is verplicht</small>
        }
      </div>

      <p>
        <button
          pButton
          pRipple
          type="button"
          class="dialog-button"
          (click)="cancel()"
        >
          <i class="pi pi-times" pButtonIcon></i>
          <span pButtonLabel>Annuleer</span>
        </button>

        <button
          pButton
          pRipple
          type="submit"
          class="dialog-button"
          (click)="saveSettings()"
        >
          <i class="pi pi-save" pButtonIcon></i>
          <span pButtonLabel>Opslaan</span>
        </button>

      </p>
    </form>
  </div>
</p-dialog>
<app-yes-no-database></app-yes-no-database>
